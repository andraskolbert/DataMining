*****************************************;
*** Begin Scoring Code from PROC DMVQ ***;
*****************************************;


*** Begin Class Look-up, Standardization, Replacement ;
drop _dm_bad; _dm_bad = 0;

*** Standardize acousticness ;
drop T_acousticness ;
if missing( acousticness ) then T_acousticness = .;
else T_acousticness = (acousticness - 0.38524802724077) * 2.47046221664808;

*** Standardize danceability ;
drop T_danceability ;
if missing( danceability ) then T_danceability = .;
else T_danceability = (danceability - 0.45885942530755) * 5.58293539283032;

*** Standardize duration ;
drop T_duration ;
if missing( duration ) then T_duration = .;
else T_duration = (duration - 303.209940579965) * 0.00664682849928;

*** Standardize energy ;
drop T_energy ;
if missing( energy ) then T_energy = .;
else T_energy = (energy - 0.56955758084358) * 3.08903086708385;

*** Standardize instrumentalness ;
drop T_instrumentalness ;
if missing( instrumentalness ) then T_instrumentalness = .;
else T_instrumentalness = (instrumentalness
         - 0.25595408347978) * 2.8127357960085;

*** Standardize key ;
drop T_key ;
if missing( key ) then T_key = .;
else T_key = (key - 5.103690685413) * 0.29402526370423;

*** Standardize liveness ;
drop T_liveness ;
if missing( liveness ) then T_liveness = .;
else T_liveness = (liveness - 0.20284937170474) * 5.55972114081271;

*** Standardize loudness ;
drop T_loudness ;
if missing( loudness ) then T_loudness = .;
else T_loudness = (loudness - -11.1779156414762) * 0.14013246881505;

*** Standardize song_hotttnesss ;
drop T_song_hotttnesss ;
if missing( song_hotttnesss ) then T_song_hotttnesss = .;
else T_song_hotttnesss = (song_hotttnesss
         - 0.33280146441124) * 6.25898044260082;

*** Standardize speechiness ;
drop T_speechiness ;
if missing( speechiness ) then T_speechiness = .;
else T_speechiness = (speechiness - 0.06609976056338) * 18.4775820455353;

*** Standardize tempo ;
drop T_tempo ;
if missing( tempo ) then T_tempo = .;
else T_tempo = (tempo - 117.088713093145) * 0.03360099229288;

*** Standardize time_signature ;
drop T_time_signature ;
if missing( time_signature ) then T_time_signature = .;
else T_time_signature = (time_signature
         - 3.86775043936731) * 2.14774294132376;

*** Standardize valence ;
drop T_valence ;
if missing( valence ) then T_valence = .;
else T_valence = (valence - 0.41813308567662) * 3.94460445422988;

*** End Class Look-up, Standardization, Replacement ;


*** Omitted Cases;
if _dm_bad then do;
   SOM_SEGMENT = .; Distance = .;
   goto SOMvlex ;
end; *** omitted;

*** Compute Distances and Cluster Membership;
label SOM_SEGMENT = 'SOM Segment ID' ;
label Distance = 'Distance' ;
array SOMvads [25] _temporary_;
drop _vqclus _vqmvar _vqnvar;
_vqmvar = 0;
do _vqclus = 1 to 25; SOMvads [_vqclus] = 0; end;
if not missing( T_acousticness ) then do;
   SOMvads [1] + ( T_acousticness - 1.0958413757542 )**2;
   SOMvads [2] + ( T_acousticness - 0.66633974354085 )**2;
   SOMvads [3] + ( T_acousticness - 0.23683811132749 )**2;
   SOMvads [4] + ( T_acousticness - -0.19266352088585 )**2;
   SOMvads [5] + ( T_acousticness - -0.62216515309921 )**2;
   SOMvads [6] + ( T_acousticness - 0.97718809869327 )**2;
   SOMvads [7] + ( T_acousticness - 0.54768646647991 )**2;
   SOMvads [8] + ( T_acousticness - 0.11818483426656 )**2;
   SOMvads [9] + ( T_acousticness - -0.31131679794679 )**2;
   SOMvads [10] + ( T_acousticness - -0.74081843016014 )**2;
   SOMvads [11] + ( T_acousticness - 0.85853482163233 )**2;
   SOMvads [12] + ( T_acousticness - 0.42903318941897 )**2;
   SOMvads [13] + ( T_acousticness - -0.00046844279437 )**2;
   SOMvads [14] + ( T_acousticness - -0.42997007500773 )**2;
   SOMvads [15] + ( T_acousticness - -0.85947170722108 )**2;
   SOMvads [16] + ( T_acousticness - 0.73988154457139 )**2;
   SOMvads [17] + ( T_acousticness - 0.31037991235803 )**2;
   SOMvads [18] + ( T_acousticness - -0.11912171985531 )**2;
   SOMvads [19] + ( T_acousticness - -0.54862335206867 )**2;
   SOMvads [20] + ( T_acousticness - -0.97812498428202 )**2;
   SOMvads [21] + ( T_acousticness - 0.62122826751045 )**2;
   SOMvads [22] + ( T_acousticness - 0.1917266352971 )**2;
   SOMvads [23] + ( T_acousticness - -0.23777499691625 )**2;
   SOMvads [24] + ( T_acousticness - -0.6672766291296 )**2;
   SOMvads [25] + ( T_acousticness - -1.09677826134296 )**2;
end;
else _vqmvar + 1;
if not missing( T_danceability ) then do;
   SOMvads [1] + ( T_danceability - 0.1233106553302 )**2;
   SOMvads [2] + ( T_danceability - 0.38950866635618 )**2;
   SOMvads [3] + ( T_danceability - 0.65570667738215 )**2;
   SOMvads [4] + ( T_danceability - 0.92190468840813 )**2;
   SOMvads [5] + ( T_danceability - 1.1881026994341 )**2;
   SOMvads [6] + ( T_danceability - -0.20397556733236 )**2;
   SOMvads [7] + ( T_danceability - 0.06222244369361 )**2;
   SOMvads [8] + ( T_danceability - 0.32842045471958 )**2;
   SOMvads [9] + ( T_danceability - 0.59461846574556 )**2;
   SOMvads [10] + ( T_danceability - 0.86081647677153 )**2;
   SOMvads [11] + ( T_danceability - -0.53126178999493 )**2;
   SOMvads [12] + ( T_danceability - -0.26506377896895 )**2;
   SOMvads [13] + ( T_danceability - 0.00113423205701 )**2;
   SOMvads [14] + ( T_danceability - 0.26733224308299 )**2;
   SOMvads [15] + ( T_danceability - 0.53353025410896 )**2;
   SOMvads [16] + ( T_danceability - -0.8585480126575 )**2;
   SOMvads [17] + ( T_danceability - -0.59235000163152 )**2;
   SOMvads [18] + ( T_danceability - -0.32615199060555 )**2;
   SOMvads [19] + ( T_danceability - -0.05995397957957 )**2;
   SOMvads [20] + ( T_danceability - 0.20624403144639 )**2;
   SOMvads [21] + ( T_danceability - -1.18583423532006 )**2;
   SOMvads [22] + ( T_danceability - -0.91963622429409 )**2;
   SOMvads [23] + ( T_danceability - -0.65343821326812 )**2;
   SOMvads [24] + ( T_danceability - -0.38724020224214 )**2;
   SOMvads [25] + ( T_danceability - -0.12104219121617 )**2;
end;
else _vqmvar + 1;
if not missing( T_duration ) then do;
   SOMvads [1] + ( T_duration - 0.17536120439811 )**2;
   SOMvads [2] + ( T_duration - -0.04804432213642 )**2;
   SOMvads [3] + ( T_duration - -0.27144984867097 )**2;
   SOMvads [4] + ( T_duration - -0.49485537520551 )**2;
   SOMvads [5] + ( T_duration - -0.71826090174005 )**2;
   SOMvads [6] + ( T_duration - 0.31090963143627 )**2;
   SOMvads [7] + ( T_duration - 0.08750410490173 )**2;
   SOMvads [8] + ( T_duration - -0.13590142163281 )**2;
   SOMvads [9] + ( T_duration - -0.35930694816735 )**2;
   SOMvads [10] + ( T_duration - -0.58271247470189 )**2;
   SOMvads [11] + ( T_duration - 0.44645805847443 )**2;
   SOMvads [12] + ( T_duration - 0.22305253193989 )**2;
   SOMvads [13] + ( T_duration - -0.00035299459465 )**2;
   SOMvads [14] + ( T_duration - -0.22375852112919 )**2;
   SOMvads [15] + ( T_duration - -0.44716404766373 )**2;
   SOMvads [16] + ( T_duration - 0.58200648551259 )**2;
   SOMvads [17] + ( T_duration - 0.35860095897805 )**2;
   SOMvads [18] + ( T_duration - 0.1351954324435 )**2;
   SOMvads [19] + ( T_duration - -0.08821009409103 )**2;
   SOMvads [20] + ( T_duration - -0.31161562062557 )**2;
   SOMvads [21] + ( T_duration - 0.71755491255075 )**2;
   SOMvads [22] + ( T_duration - 0.49414938601621 )**2;
   SOMvads [23] + ( T_duration - 0.27074385948166 )**2;
   SOMvads [24] + ( T_duration - 0.04733833294712 )**2;
   SOMvads [25] + ( T_duration - -0.17606719358741 )**2;
end;
else _vqmvar + 1;
if not missing( T_energy ) then do;
   SOMvads [1] + ( T_energy - -1.1735634655399 )**2;
   SOMvads [2] + ( T_energy - -0.73267912412634 )**2;
   SOMvads [3] + ( T_energy - -0.29179478271279 )**2;
   SOMvads [4] + ( T_energy - 0.14908955870075 )**2;
   SOMvads [5] + ( T_energy - 0.5899739001143 )**2;
   SOMvads [6] + ( T_energy - -1.02713880956911 )**2;
   SOMvads [7] + ( T_energy - -0.58625446815556 )**2;
   SOMvads [8] + ( T_energy - -0.145370126742 )**2;
   SOMvads [9] + ( T_energy - 0.29551421467154 )**2;
   SOMvads [10] + ( T_energy - 0.73639855608509 )**2;
   SOMvads [11] + ( T_energy - -0.88071415359832 )**2;
   SOMvads [12] + ( T_energy - -0.43982981218477 )**2;
   SOMvads [13] + ( T_energy - 0.00105452922878 )**2;
   SOMvads [14] + ( T_energy - 0.44193887064233 )**2;
   SOMvads [15] + ( T_energy - 0.88282321205588 )**2;
   SOMvads [16] + ( T_energy - -0.73428949762753 )**2;
   SOMvads [17] + ( T_energy - -0.29340515621398 )**2;
   SOMvads [18] + ( T_energy - 0.14747918519956 )**2;
   SOMvads [19] + ( T_energy - 0.58836352661312 )**2;
   SOMvads [20] + ( T_energy - 1.02924786802667 )**2;
   SOMvads [21] + ( T_energy - -0.58786484165674 )**2;
   SOMvads [22] + ( T_energy - -0.14698050024319 )**2;
   SOMvads [23] + ( T_energy - 0.29390384117035 )**2;
   SOMvads [24] + ( T_energy - 0.7347881825839 )**2;
   SOMvads [25] + ( T_energy - 1.17567252399746 )**2;
end;
else _vqmvar + 1;
if not missing( T_instrumentalness ) then do;
   SOMvads [1] + ( T_instrumentalness - 0.68232199269683 )**2;
   SOMvads [2] + ( T_instrumentalness - 0.32575525988451 )**2;
   SOMvads [3] + ( T_instrumentalness - -0.03081147292779 )**2;
   SOMvads [4] + ( T_instrumentalness - -0.38737820574011 )**2;
   SOMvads [5] + ( T_instrumentalness - -0.74394493855243 )**2;
   SOMvads [6] + ( T_instrumentalness - 0.69827656258262 )**2;
   SOMvads [7] + ( T_instrumentalness - 0.34170982977031 )**2;
   SOMvads [8] + ( T_instrumentalness - -0.014856903042 )**2;
   SOMvads [9] + ( T_instrumentalness - -0.37142363585432 )**2;
   SOMvads [10] + ( T_instrumentalness - -0.72799036866663 )**2;
   SOMvads [11] + ( T_instrumentalness - 0.71423113246842 )**2;
   SOMvads [12] + ( T_instrumentalness - 0.3576643996561 )**2;
   SOMvads [13] + ( T_instrumentalness - 0.00109766684379 )**2;
   SOMvads [14] + ( T_instrumentalness - -0.35546906596852 )**2;
   SOMvads [15] + ( T_instrumentalness - -0.71203579878084 )**2;
   SOMvads [16] + ( T_instrumentalness - 0.73018570235422 )**2;
   SOMvads [17] + ( T_instrumentalness - 0.3736189695419 )**2;
   SOMvads [18] + ( T_instrumentalness - 0.01705223672958 )**2;
   SOMvads [19] + ( T_instrumentalness - -0.33951449608273 )**2;
   SOMvads [20] + ( T_instrumentalness - -0.69608122889504 )**2;
   SOMvads [21] + ( T_instrumentalness - 0.74614027224001 )**2;
   SOMvads [22] + ( T_instrumentalness - 0.38957353942769 )**2;
   SOMvads [23] + ( T_instrumentalness - 0.03300680661538 )**2;
   SOMvads [24] + ( T_instrumentalness - -0.32355992619693 )**2;
   SOMvads [25] + ( T_instrumentalness - -0.68012665900925 )**2;
end;
else _vqmvar + 1;
if not missing( T_key ) then do;
   SOMvads [1] + ( T_key - -0.15016201966777 )**2;
   SOMvads [2] + ( T_key - -0.12652408217251 )**2;
   SOMvads [3] + ( T_key - -0.10288614467725 )**2;
   SOMvads [4] + ( T_key - -0.07924820718199 )**2;
   SOMvads [5] + ( T_key - -0.05561026968673 )**2;
   SOMvads [6] + ( T_key - -0.09869210958167 )**2;
   SOMvads [7] + ( T_key - -0.07505417208641 )**2;
   SOMvads [8] + ( T_key - -0.05141623459115 )**2;
   SOMvads [9] + ( T_key - -0.02777829709589 )**2;
   SOMvads [10] + ( T_key - -0.00414035960063 )**2;
   SOMvads [11] + ( T_key - -0.04722219949557 )**2;
   SOMvads [12] + ( T_key - -0.02358426200031 )**2;
   SOMvads [13] + ( T_key - 0.00005367549494 )**2;
   SOMvads [14] + ( T_key - 0.0236916129902 )**2;
   SOMvads [15] + ( T_key - 0.04732955048545 )**2;
   SOMvads [16] + ( T_key - 0.00424771059052 )**2;
   SOMvads [17] + ( T_key - 0.02788564808578 )**2;
   SOMvads [18] + ( T_key - 0.05152358558104 )**2;
   SOMvads [19] + ( T_key - 0.07516152307629 )**2;
   SOMvads [20] + ( T_key - 0.09879946057155 )**2;
   SOMvads [21] + ( T_key - 0.05571762067662 )**2;
   SOMvads [22] + ( T_key - 0.07935555817187 )**2;
   SOMvads [23] + ( T_key - 0.10299349566713 )**2;
   SOMvads [24] + ( T_key - 0.12663143316239 )**2;
   SOMvads [25] + ( T_key - 0.15026937065765 )**2;
end;
else _vqmvar + 1;
if not missing( T_liveness ) then do;
   SOMvads [1] + ( T_liveness - -0.70507059489433 )**2;
   SOMvads [2] + ( T_liveness - -0.61718767316298 )**2;
   SOMvads [3] + ( T_liveness - -0.52930475143162 )**2;
   SOMvads [4] + ( T_liveness - -0.44142182970027 )**2;
   SOMvads [5] + ( T_liveness - -0.35353890796891 )**2;
   SOMvads [6] + ( T_liveness - -0.4405368398339 )**2;
   SOMvads [7] + ( T_liveness - -0.35265391810254 )**2;
   SOMvads [8] + ( T_liveness - -0.26477099637118 )**2;
   SOMvads [9] + ( T_liveness - -0.17688807463983 )**2;
   SOMvads [10] + ( T_liveness - -0.08900515290847 )**2;
   SOMvads [11] + ( T_liveness - -0.17600308477346 )**2;
   SOMvads [12] + ( T_liveness - -0.0881201630421 )**2;
   SOMvads [13] + ( T_liveness - -0.00023724131074 )**2;
   SOMvads [14] + ( T_liveness - 0.0876456804206 )**2;
   SOMvads [15] + ( T_liveness - 0.17552860215196 )**2;
   SOMvads [16] + ( T_liveness - 0.08853067028697 )**2;
   SOMvads [17] + ( T_liveness - 0.17641359201833 )**2;
   SOMvads [18] + ( T_liveness - 0.26429651374968 )**2;
   SOMvads [19] + ( T_liveness - 0.35217943548104 )**2;
   SOMvads [20] + ( T_liveness - 0.4400623572124 )**2;
   SOMvads [21] + ( T_liveness - 0.35306442534741 )**2;
   SOMvads [22] + ( T_liveness - 0.44094734707877 )**2;
   SOMvads [23] + ( T_liveness - 0.52883026881012 )**2;
   SOMvads [24] + ( T_liveness - 0.61671319054148 )**2;
   SOMvads [25] + ( T_liveness - 0.70459611227284 )**2;
end;
else _vqmvar + 1;
if not missing( T_loudness ) then do;
   SOMvads [1] + ( T_loudness - -1.00312409843154 )**2;
   SOMvads [2] + ( T_loudness - -0.560744939871 )**2;
   SOMvads [3] + ( T_loudness - -0.11836578131047 )**2;
   SOMvads [4] + ( T_loudness - 0.32401337725006 )**2;
   SOMvads [5] + ( T_loudness - 0.76639253581059 )**2;
   SOMvads [6] + ( T_loudness - -0.94300896488782 )**2;
   SOMvads [7] + ( T_loudness - -0.50062980632728 )**2;
   SOMvads [8] + ( T_loudness - -0.05825064776675 )**2;
   SOMvads [9] + ( T_loudness - 0.38412851079378 )**2;
   SOMvads [10] + ( T_loudness - 0.82650766935431 )**2;
   SOMvads [11] + ( T_loudness - -0.8828938313441 )**2;
   SOMvads [12] + ( T_loudness - -0.44051467278356 )**2;
   SOMvads [13] + ( T_loudness - 0.00186448577697 )**2;
   SOMvads [14] + ( T_loudness - 0.4442436443375 )**2;
   SOMvads [15] + ( T_loudness - 0.88662280289804 )**2;
   SOMvads [16] + ( T_loudness - -0.82277869780037 )**2;
   SOMvads [17] + ( T_loudness - -0.38039953923984 )**2;
   SOMvads [18] + ( T_loudness - 0.06197961932069 )**2;
   SOMvads [19] + ( T_loudness - 0.50435877788122 )**2;
   SOMvads [20] + ( T_loudness - 0.94673793644176 )**2;
   SOMvads [21] + ( T_loudness - -0.76266356425665 )**2;
   SOMvads [22] + ( T_loudness - -0.32028440569612 )**2;
   SOMvads [23] + ( T_loudness - 0.12209475286441 )**2;
   SOMvads [24] + ( T_loudness - 0.56447391142494 )**2;
   SOMvads [25] + ( T_loudness - 1.00685306998548 )**2;
end;
else _vqmvar + 1;
if not missing( T_song_hotttnesss ) then do;
   SOMvads [1] + ( T_song_hotttnesss - -0.52711423451733 )**2;
   SOMvads [2] + ( T_song_hotttnesss - -0.21580842131696 )**2;
   SOMvads [3] + ( T_song_hotttnesss - 0.09549739188339 )**2;
   SOMvads [4] + ( T_song_hotttnesss - 0.40680320508376 )**2;
   SOMvads [5] + ( T_song_hotttnesss - 0.71810901828412 )**2;
   SOMvads [6] + ( T_song_hotttnesss - -0.57458737986757 )**2;
   SOMvads [7] + ( T_song_hotttnesss - -0.26328156666721 )**2;
   SOMvads [8] + ( T_song_hotttnesss - 0.04802424653315 )**2;
   SOMvads [9] + ( T_song_hotttnesss - 0.35933005973351 )**2;
   SOMvads [10] + ( T_song_hotttnesss - 0.67063587293388 )**2;
   SOMvads [11] + ( T_song_hotttnesss - -0.62206052521782 )**2;
   SOMvads [12] + ( T_song_hotttnesss - -0.31075471201745 )**2;
   SOMvads [13] + ( T_song_hotttnesss - 0.0005511011829 )**2;
   SOMvads [14] + ( T_song_hotttnesss - 0.31185691438327 )**2;
   SOMvads [15] + ( T_song_hotttnesss - 0.62316272758364 )**2;
   SOMvads [16] + ( T_song_hotttnesss - -0.66953367056806 )**2;
   SOMvads [17] + ( T_song_hotttnesss - -0.35822785736769 )**2;
   SOMvads [18] + ( T_song_hotttnesss - -0.04692204416733 )**2;
   SOMvads [19] + ( T_song_hotttnesss - 0.26438376903303 )**2;
   SOMvads [20] + ( T_song_hotttnesss - 0.57568958223339 )**2;
   SOMvads [21] + ( T_song_hotttnesss - -0.7170068159183 )**2;
   SOMvads [22] + ( T_song_hotttnesss - -0.40570100271794 )**2;
   SOMvads [23] + ( T_song_hotttnesss - -0.09439518951757 )**2;
   SOMvads [24] + ( T_song_hotttnesss - 0.21691062368278 )**2;
   SOMvads [25] + ( T_song_hotttnesss - 0.52821643688315 )**2;
end;
else _vqmvar + 1;
if not missing( T_speechiness ) then do;
   SOMvads [1] + ( T_speechiness - -0.7364293958124 )**2;
   SOMvads [2] + ( T_speechiness - -0.60071285031583 )**2;
   SOMvads [3] + ( T_speechiness - -0.46499630481926 )**2;
   SOMvads [4] + ( T_speechiness - -0.32927975932269 )**2;
   SOMvads [5] + ( T_speechiness - -0.19356321382611 )**2;
   SOMvads [6] + ( T_speechiness - -0.50393124340277 )**2;
   SOMvads [7] + ( T_speechiness - -0.3682146979062 )**2;
   SOMvads [8] + ( T_speechiness - -0.23249815240963 )**2;
   SOMvads [9] + ( T_speechiness - -0.09678160691305 )**2;
   SOMvads [10] + ( T_speechiness - 0.03893493858351 )**2;
   SOMvads [11] + ( T_speechiness - -0.27143309099314 )**2;
   SOMvads [12] + ( T_speechiness - -0.13571654549657 )**2;
   SOMvads [13] + ( T_speechiness - 0 )**2;
   SOMvads [14] + ( T_speechiness - 0.13571654549657 )**2;
   SOMvads [15] + ( T_speechiness - 0.27143309099314 )**2;
   SOMvads [16] + ( T_speechiness - -0.03893493858351 )**2;
   SOMvads [17] + ( T_speechiness - 0.09678160691305 )**2;
   SOMvads [18] + ( T_speechiness - 0.23249815240963 )**2;
   SOMvads [19] + ( T_speechiness - 0.3682146979062 )**2;
   SOMvads [20] + ( T_speechiness - 0.50393124340277 )**2;
   SOMvads [21] + ( T_speechiness - 0.19356321382611 )**2;
   SOMvads [22] + ( T_speechiness - 0.32927975932269 )**2;
   SOMvads [23] + ( T_speechiness - 0.46499630481926 )**2;
   SOMvads [24] + ( T_speechiness - 0.60071285031583 )**2;
   SOMvads [25] + ( T_speechiness - 0.7364293958124 )**2;
end;
else _vqmvar + 1;
if not missing( T_tempo ) then do;
   SOMvads [1] + ( T_tempo - -0.62883928693183 )**2;
   SOMvads [2] + ( T_tempo - -0.40974630158399 )**2;
   SOMvads [3] + ( T_tempo - -0.19065331623614 )**2;
   SOMvads [4] + ( T_tempo - 0.02843966911169 )**2;
   SOMvads [5] + ( T_tempo - 0.24753265445953 )**2;
   SOMvads [6] + ( T_tempo - -0.53205751615884 )**2;
   SOMvads [7] + ( T_tempo - -0.31296453081099 )**2;
   SOMvads [8] + ( T_tempo - -0.09387154546315 )**2;
   SOMvads [9] + ( T_tempo - 0.12522143988468 )**2;
   SOMvads [10] + ( T_tempo - 0.34431442523253 )**2;
   SOMvads [11] + ( T_tempo - -0.43527574538584 )**2;
   SOMvads [12] + ( T_tempo - -0.216182760038 )**2;
   SOMvads [13] + ( T_tempo - 0.00291022530984 )**2;
   SOMvads [14] + ( T_tempo - 0.22200321065768 )**2;
   SOMvads [15] + ( T_tempo - 0.44109619600552 )**2;
   SOMvads [16] + ( T_tempo - -0.33849397461285 )**2;
   SOMvads [17] + ( T_tempo - -0.119400989265 )**2;
   SOMvads [18] + ( T_tempo - 0.09969199608283 )**2;
   SOMvads [19] + ( T_tempo - 0.31878498143067 )**2;
   SOMvads [20] + ( T_tempo - 0.53787796677852 )**2;
   SOMvads [21] + ( T_tempo - -0.24171220383985 )**2;
   SOMvads [22] + ( T_tempo - -0.02261921849201 )**2;
   SOMvads [23] + ( T_tempo - 0.19647376685582 )**2;
   SOMvads [24] + ( T_tempo - 0.41556675220367 )**2;
   SOMvads [25] + ( T_tempo - 0.63465973755151 )**2;
end;
else _vqmvar + 1;
if not missing( T_time_signature ) then do;
   SOMvads [1] + ( T_time_signature - -0.21189208305272 )**2;
   SOMvads [2] + ( T_time_signature - -0.04429919630782 )**2;
   SOMvads [3] + ( T_time_signature - 0.12329369043708 )**2;
   SOMvads [4] + ( T_time_signature - 0.29088657718198 )**2;
   SOMvads [5] + ( T_time_signature - 0.45847946392688 )**2;
   SOMvads [6] + ( T_time_signature - -0.27378896177508 )**2;
   SOMvads [7] + ( T_time_signature - -0.10619607503018 )**2;
   SOMvads [8] + ( T_time_signature - 0.06139681171471 )**2;
   SOMvads [9] + ( T_time_signature - 0.22898969845962 )**2;
   SOMvads [10] + ( T_time_signature - 0.39658258520452 )**2;
   SOMvads [11] + ( T_time_signature - -0.33568584049745 )**2;
   SOMvads [12] + ( T_time_signature - -0.16809295375254 )**2;
   SOMvads [13] + ( T_time_signature - -0.00050006700764 )**2;
   SOMvads [14] + ( T_time_signature - 0.16709281973726 )**2;
   SOMvads [15] + ( T_time_signature - 0.33468570648216 )**2;
   SOMvads [16] + ( T_time_signature - -0.39758271921981 )**2;
   SOMvads [17] + ( T_time_signature - -0.2299898324749 )**2;
   SOMvads [18] + ( T_time_signature - -0.06239694573 )**2;
   SOMvads [19] + ( T_time_signature - 0.10519594101489 )**2;
   SOMvads [20] + ( T_time_signature - 0.2727888277598 )**2;
   SOMvads [21] + ( T_time_signature - -0.45947959794217 )**2;
   SOMvads [22] + ( T_time_signature - -0.29188671119727 )**2;
   SOMvads [23] + ( T_time_signature - -0.12429382445236 )**2;
   SOMvads [24] + ( T_time_signature - 0.04329906229253 )**2;
   SOMvads [25] + ( T_time_signature - 0.21089194903743 )**2;
end;
else _vqmvar + 1;
if not missing( T_valence ) then do;
   SOMvads [1] + ( T_valence - -0.12632171513194 )**2;
   SOMvads [2] + ( T_valence - 0.17395325622006 )**2;
   SOMvads [3] + ( T_valence - 0.47422822757206 )**2;
   SOMvads [4] + ( T_valence - 0.77450319892407 )**2;
   SOMvads [5] + ( T_valence - 1.07477817027608 )**2;
   SOMvads [6] + ( T_valence - -0.36306562436732 )**2;
   SOMvads [7] + ( T_valence - -0.06279065301531 )**2;
   SOMvads [8] + ( T_valence - 0.23748431833668 )**2;
   SOMvads [9] + ( T_valence - 0.53775928968869 )**2;
   SOMvads [10] + ( T_valence - 0.8380342610407 )**2;
   SOMvads [11] + ( T_valence - -0.5998095336027 )**2;
   SOMvads [12] + ( T_valence - -0.29953456225069 )**2;
   SOMvads [13] + ( T_valence - 0.00074040910131 )**2;
   SOMvads [14] + ( T_valence - 0.30101538045331 )**2;
   SOMvads [15] + ( T_valence - 0.60129035180532 )**2;
   SOMvads [16] + ( T_valence - -0.83655344283808 )**2;
   SOMvads [17] + ( T_valence - -0.53627847148607 )**2;
   SOMvads [18] + ( T_valence - -0.23600350013406 )**2;
   SOMvads [19] + ( T_valence - 0.06427147121793 )**2;
   SOMvads [20] + ( T_valence - 0.36454644256994 )**2;
   SOMvads [21] + ( T_valence - -1.07329735207346 )**2;
   SOMvads [22] + ( T_valence - -0.77302238072145 )**2;
   SOMvads [23] + ( T_valence - -0.47274740936944 )**2;
   SOMvads [24] + ( T_valence - -0.17247243801744 )**2;
   SOMvads [25] + ( T_valence - 0.12780253333456 )**2;
end;
else _vqmvar + 1;
_vqnvar = 13 - _vqmvar;
if _vqnvar <= 1.9213075574953E-11 then do;
   SOM_SEGMENT = .; Distance = .;
end;
else do;
   SOM_SEGMENT = 1; Distance = SOMvads [1];
   _vqfzdst = Distance * 0.99999999999988; drop _vqfzdst;
   do _vqclus = 2 to 25;
      if SOMvads [_vqclus] < _vqfzdst then do;
         SOM_SEGMENT = _vqclus; Distance = SOMvads [_vqclus];
         _vqfzdst = Distance * 0.99999999999988;
      end;
   end;
   Distance = sqrt(Distance * (13 / _vqnvar));
end;

*** SOM Row and Column;
label SOM_DIMENSION1 = 'SOM Dimension1' ;
label SOM_DIMENSION2 = 'SOM Dimension2' ;
label SOM_ID = 'SOM ID' ;
length SOM_ID $8;
if SOM_SEGMENT > 0 then do;
   SOM_DIMENSION1 = 1 + floor(( SOM_SEGMENT - 1) / 5);
   SOM_DIMENSION2 = 1 + mod( SOM_SEGMENT - 1, 5 );
   SOM_ID = put( SOM_DIMENSION1 ,8. );
   SOM_ID = left( SOM_ID );
   _vqlen = 1 + length( SOM_ID ); drop _vqlen;
   substr( SOM_ID , _vqlen , 1 ) = ':';
   length _dm8 $8; _dm8 = put( SOM_DIMENSION2 , 8. );
   _dm8 = left(_dm8); drop _dm8;
   substr( SOM_ID , _vqlen+1 ) = _dm8;
end;
else do; SOM_DIMENSION1 = .; SOM_DIMENSION2 = .; SOM_ID = ' '; end;
SOMvlex :;

***************************************;
*** End Scoring Code from PROC DMVQ ***;
***************************************;
