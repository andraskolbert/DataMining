****************************************************************;
******             DECISION TREE SCORING CODE             ******;
****************************************************************;

******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
LENGTH I_genre  $    9;
LENGTH U_genre  $    9;
LENGTH _WARN_  $    4;

******              LABELS FOR NEW VARIABLES              ******;
LABEL _NODE_  = 'Node' ;
LABEL _LEAF_  = 'Leaf' ;
LABEL P_genreclassical  = 'Predicted: genre=classical' ;
LABEL P_genrerock  = 'Predicted: genre=rock' ;
LABEL P_genrepop  = 'Predicted: genre=pop' ;
LABEL P_genremetal  = 'Predicted: genre=metal' ;
LABEL P_genrejazz  = 'Predicted: genre=jazz' ;
LABEL Q_genreclassical  = 'Unadjusted P: genre=classical' ;
LABEL Q_genrerock  = 'Unadjusted P: genre=rock' ;
LABEL Q_genrepop  = 'Unadjusted P: genre=pop' ;
LABEL Q_genremetal  = 'Unadjusted P: genre=metal' ;
LABEL Q_genrejazz  = 'Unadjusted P: genre=jazz' ;
LABEL I_genre  = 'Into: genre' ;
LABEL U_genre  = 'Unnormalized Into: genre' ;
LABEL _WARN_  = 'Warnings' ;


******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
LENGTH _ARBFMT_9 $      9; DROP _ARBFMT_9;
_ARBFMT_9 = ' '; /* Initialize to avoid warning. */


******             ASSIGN OBSERVATION TO NODE             ******;
IF  NOT MISSING(acousticness ) AND
             0.4735715 <= acousticness  THEN DO;
  IF  NOT MISSING(danceability ) AND
    danceability  <             0.344749 THEN DO;
    IF  NOT MISSING(loudness ) AND
                    -7.374 <= loudness  THEN DO;
      _NODE_  =                   13;
      _LEAF_  =                   13;
      P_genreclassical  =                    0;
      P_genrerock  =                  0.6;
      P_genrepop  =                    0;
      P_genremetal  =                  0.2;
      P_genrejazz  =                  0.2;
      Q_genreclassical  =                    0;
      Q_genrerock  =                  0.6;
      Q_genrepop  =                    0;
      Q_genremetal  =                  0.2;
      Q_genrejazz  =                  0.2;
      I_genre  = 'ROCK' ;
      U_genre  = 'rock' ;
      END;
    ELSE DO;
      _NODE_  =                   12;
      _LEAF_  =                   12;
      P_genreclassical  =     0.93059936908517;
      P_genrerock  =     0.00946372239747;
      P_genrepop  =     0.00946372239747;
      P_genremetal  =                    0;
      P_genrejazz  =     0.05047318611987;
      Q_genreclassical  =     0.93059936908517;
      Q_genrerock  =     0.00946372239747;
      Q_genrepop  =     0.00946372239747;
      Q_genremetal  =                    0;
      Q_genrejazz  =     0.05047318611987;
      I_genre  = 'CLASSICAL' ;
      U_genre  = 'classical' ;
      END;
    END;
  ELSE DO;
    IF  NOT MISSING(instrumentalness ) AND
      instrumentalness  <            0.0000395 THEN DO;
      IF  NOT MISSING(loudness ) AND
        loudness  <              -10.354 THEN DO;
        _NODE_  =                   22;
        _LEAF_  =                   14;
        P_genreclassical  =     0.33333333333333;
        P_genrerock  =     0.19047619047619;
        P_genrepop  =     0.04761904761904;
        P_genremetal  =                    0;
        P_genrejazz  =     0.42857142857142;
        Q_genreclassical  =     0.33333333333333;
        Q_genrerock  =     0.19047619047619;
        Q_genrepop  =     0.04761904761904;
        Q_genremetal  =                    0;
        Q_genrejazz  =     0.42857142857142;
        I_genre  = 'JAZZ' ;
        U_genre  = 'jazz' ;
        END;
      ELSE DO;
        _NODE_  =                   23;
        _LEAF_  =                   15;
        P_genreclassical  =                    0;
        P_genrerock  =     0.23529411764705;
        P_genrepop  =     0.73529411764705;
        P_genremetal  =     0.02941176470588;
        P_genrejazz  =                    0;
        Q_genreclassical  =                    0;
        Q_genrerock  =     0.23529411764705;
        Q_genrepop  =     0.73529411764705;
        Q_genremetal  =     0.02941176470588;
        Q_genrejazz  =                    0;
        I_genre  = 'POP' ;
        U_genre  = 'pop' ;
        END;
      END;
    ELSE DO;
      IF  NOT MISSING(loudness ) AND
                     -5.6925 <= loudness  THEN DO;
        _NODE_  =                   25;
        _LEAF_  =                   17;
        P_genreclassical  =     0.11111111111111;
        P_genrerock  =     0.11111111111111;
        P_genrepop  =     0.44444444444444;
        P_genremetal  =                    0;
        P_genrejazz  =     0.33333333333333;
        Q_genreclassical  =     0.11111111111111;
        Q_genrerock  =     0.11111111111111;
        Q_genrepop  =     0.44444444444444;
        Q_genremetal  =                    0;
        Q_genrejazz  =     0.33333333333333;
        I_genre  = 'POP' ;
        U_genre  = 'pop' ;
        END;
      ELSE DO;
        _NODE_  =                   24;
        _LEAF_  =                   16;
        P_genreclassical  =     0.23062015503875;
        P_genrerock  =      0.0329457364341;
        P_genrepop  =     0.00581395348837;
        P_genremetal  =     0.01162790697674;
        P_genrejazz  =     0.71899224806201;
        Q_genreclassical  =     0.23062015503875;
        Q_genrerock  =      0.0329457364341;
        Q_genrepop  =     0.00581395348837;
        Q_genremetal  =     0.01162790697674;
        Q_genrejazz  =     0.71899224806201;
        I_genre  = 'JAZZ' ;
        U_genre  = 'jazz' ;
        END;
      END;
    END;
  END;
ELSE DO;
  IF  NOT MISSING(danceability ) AND
                0.546611 <= danceability  THEN DO;
    IF  NOT MISSING(instrumentalness ) AND
                  0.874341 <= instrumentalness  THEN DO;
      _NODE_  =                   11;
      _LEAF_  =                   11;
      P_genreclassical  =                  0.6;
      P_genrerock  =                    0;
      P_genrepop  =                    0;
      P_genremetal  =                    0;
      P_genrejazz  =                  0.4;
      Q_genreclassical  =                  0.6;
      Q_genrerock  =                    0;
      Q_genrepop  =                    0;
      Q_genremetal  =                    0;
      Q_genrejazz  =                  0.4;
      I_genre  = 'CLASSICAL' ;
      U_genre  = 'classical' ;
      END;
    ELSE DO;
      IF  NOT MISSING(acousticness ) AND
        acousticness  <            0.0008825 THEN DO;
        _NODE_  =                   18;
        _LEAF_  =                    7;
        P_genreclassical  =                    0;
        P_genrerock  =                0.125;
        P_genrepop  =                0.275;
        P_genremetal  =                  0.6;
        P_genrejazz  =                    0;
        Q_genreclassical  =                    0;
        Q_genrerock  =                0.125;
        Q_genrepop  =                0.275;
        Q_genremetal  =                  0.6;
        Q_genrejazz  =                    0;
        I_genre  = 'METAL' ;
        U_genre  = 'metal' ;
        END;
      ELSE DO;
        IF  NOT MISSING(loudness ) AND
          loudness  <              -8.4785 THEN DO;
          IF  NOT MISSING(energy ) AND
            energy  <            0.3868935 THEN DO;
            _NODE_  =                   40;
            _LEAF_  =                    8;
            P_genreclassical  =                    0;
            P_genrerock  =                    0;
            P_genrepop  =     0.33333333333333;
            P_genremetal  =                    0;
            P_genrejazz  =     0.66666666666666;
            Q_genreclassical  =                    0;
            Q_genrerock  =                    0;
            Q_genrepop  =     0.33333333333333;
            Q_genremetal  =                    0;
            Q_genrejazz  =     0.66666666666666;
            I_genre  = 'JAZZ' ;
            U_genre  = 'jazz' ;
            END;
          ELSE DO;
            _NODE_  =                   41;
            _LEAF_  =                    9;
            P_genreclassical  =     0.02325581395348;
            P_genrerock  =     0.62790697674418;
            P_genrepop  =     0.19767441860465;
            P_genremetal  =     0.04651162790697;
            P_genrejazz  =     0.10465116279069;
            Q_genreclassical  =     0.02325581395348;
            Q_genrerock  =     0.62790697674418;
            Q_genrepop  =     0.19767441860465;
            Q_genremetal  =     0.04651162790697;
            Q_genrejazz  =     0.10465116279069;
            I_genre  = 'ROCK' ;
            U_genre  = 'rock' ;
            END;
          END;
        ELSE DO;
          _NODE_  =                   31;
          _LEAF_  =                   10;
          P_genreclassical  =       0.002457002457;
          P_genrerock  =     0.14987714987714;
          P_genrepop  =      0.8034398034398;
          P_genremetal  =     0.03685503685503;
          P_genrejazz  =       0.007371007371;
          Q_genreclassical  =       0.002457002457;
          Q_genrerock  =     0.14987714987714;
          Q_genrepop  =      0.8034398034398;
          Q_genremetal  =     0.03685503685503;
          Q_genrejazz  =       0.007371007371;
          I_genre  = 'POP' ;
          U_genre  = 'pop' ;
          END;
        END;
      END;
    END;
  ELSE DO;
    IF  NOT MISSING(energy ) AND
      energy  <             0.253875 THEN DO;
      _NODE_  =                    8;
      _LEAF_  =                    1;
      P_genreclassical  =                  0.6;
      P_genrerock  =                    0;
      P_genrepop  =                  0.1;
      P_genremetal  =                    0;
      P_genrejazz  =                  0.3;
      Q_genreclassical  =                  0.6;
      Q_genrerock  =                    0;
      Q_genrepop  =                  0.1;
      Q_genremetal  =                    0;
      Q_genrejazz  =                  0.3;
      I_genre  = 'CLASSICAL' ;
      U_genre  = 'classical' ;
      END;
    ELSE DO;
      IF  NOT MISSING(acousticness ) AND
                    0.046963 <= acousticness  THEN DO;
        IF  NOT MISSING(instrumentalness ) AND
                      0.756626 <= instrumentalness  THEN DO;
          _NODE_  =                   29;
          _LEAF_  =                    6;
          P_genreclassical  =     0.27272727272727;
          P_genrerock  =     0.18181818181818;
          P_genrepop  =                    0;
          P_genremetal  =     0.18181818181818;
          P_genrejazz  =     0.36363636363636;
          Q_genreclassical  =     0.27272727272727;
          Q_genrerock  =     0.18181818181818;
          Q_genrepop  =                    0;
          Q_genremetal  =     0.18181818181818;
          Q_genrejazz  =     0.36363636363636;
          I_genre  = 'JAZZ' ;
          U_genre  = 'jazz' ;
          END;
        ELSE DO;
          _NODE_  =                   28;
          _LEAF_  =                    5;
          P_genreclassical  =                    0;
          P_genrerock  =                 0.52;
          P_genrepop  =                 0.22;
          P_genremetal  =                0.095;
          P_genrejazz  =                0.165;
          Q_genreclassical  =                    0;
          Q_genrerock  =                 0.52;
          Q_genrepop  =                 0.22;
          Q_genremetal  =                0.095;
          Q_genrejazz  =                0.165;
          I_genre  = 'ROCK' ;
          U_genre  = 'rock' ;
          END;
        END;
      ELSE DO;
        IF  NOT MISSING(energy ) AND
          energy  <            0.4821155 THEN DO;
          _NODE_  =                   26;
          _LEAF_  =                    2;
          P_genreclassical  =                  0.2;
          P_genrerock  =                  0.2;
          P_genrepop  =                    0;
          P_genremetal  =                  0.2;
          P_genrejazz  =                  0.4;
          Q_genreclassical  =                  0.2;
          Q_genrerock  =                  0.2;
          Q_genrepop  =                    0;
          Q_genremetal  =                  0.2;
          Q_genrejazz  =                  0.4;
          I_genre  = 'JAZZ' ;
          U_genre  = 'jazz' ;
          END;
        ELSE DO;
          IF  NOT MISSING(instrumentalness ) AND
            instrumentalness  <                 5E-7 THEN DO;
            _NODE_  =                   36;
            _LEAF_  =                    3;
            P_genreclassical  =                    0;
            P_genrerock  =     0.36585365853658;
            P_genrepop  =      0.4390243902439;
            P_genremetal  =     0.19512195121951;
            P_genrejazz  =                    0;
            Q_genreclassical  =                    0;
            Q_genrerock  =     0.36585365853658;
            Q_genrepop  =      0.4390243902439;
            Q_genremetal  =     0.19512195121951;
            Q_genrejazz  =                    0;
            I_genre  = 'POP' ;
            U_genre  = 'pop' ;
            END;
          ELSE DO;
            _NODE_  =                   37;
            _LEAF_  =                    4;
            P_genreclassical  =                    0;
            P_genrerock  =     0.29821428571428;
            P_genrepop  =     0.01428571428571;
            P_genremetal  =     0.68571428571428;
            P_genrejazz  =     0.00178571428571;
            Q_genreclassical  =                    0;
            Q_genrerock  =     0.29821428571428;
            Q_genrepop  =     0.01428571428571;
            Q_genremetal  =     0.68571428571428;
            Q_genrejazz  =     0.00178571428571;
            I_genre  = 'METAL' ;
            U_genre  = 'metal' ;
            END;
          END;
        END;
      END;
    END;
  END;

****************************************************************;
******          END OF DECISION TREE SCORING CODE         ******;
****************************************************************;
drop _LEAF_;
